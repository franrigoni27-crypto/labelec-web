<%- include('partials/header', { titulo: 'Servicio Técnico - Labelec Ingeniería' }) %>

<style>
    /* --- Estilos específicos de Servicio Técnico --- */
    
    .category-slide {
        width: 100%; height: 350px;
        background-color: var(--color-secundario);
        /* Usamos una imagen de fondo o un color sólido elegante */
        background-image: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('/img/slides/slide-servicio-tecnico.jpg');
        background-size: cover; background-position: center;
        display: flex; align-items: center; justify-content: center; text-align: center;
    }
    
    .category-slide h1 { font-size: 48px; color: white; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }

    .page-header { background-color: var(--color-fondo); padding: 20px 0; border-bottom: 1px solid #eee; }
    .breadcrumbs { font-size: 14px; color: var(--color-secundario); }
    .breadcrumbs a { color: var(--color-primario); text-decoration: none; }
    
    .service-content { padding: 80px 0; display: flex; flex-wrap: wrap; gap: 50px; }
    
    .service-info { flex: 1; min-width: 300px; }
    .service-info h2 { font-size: 32px; color: var(--color-primario); margin-bottom: 20px; }
    .service-info p { color: var(--color-secundario); margin-bottom: 15px; line-height: 1.7; font-size: 16px; }
    
    .service-info ul { list-style-type: none; padding: 0; margin-top: 30px; }
    .service-info li { margin-bottom: 15px; padding-left: 30px; position: relative; color: #555; }
    .service-info li::before { content: '✓'; position: absolute; left: 0; color: var(--color-acento-servicio); font-weight: bold; }
    
    /* Formulario Estilizado */
    .service-form-container {
        flex: 1; min-width: 350px;
        background-color: white; padding: 40px;
        border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.08);
        height: fit-content; border-top: 5px solid var(--color-primario);
    }
    .service-form h3 { text-align: center; margin-bottom: 25px; color: var(--color-primario); font-size: 24px; }
    
    .form-group { margin-bottom: 20px; }
    .form-group label { display: block; font-weight: 600; margin-bottom: 8px; color: #444; font-size: 14px; }
    
    .form-group input, .form-group textarea {
        width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px;
        font-size: 16px; font-family: 'Exo 2.0', sans-serif; transition: 0.3s;
    }
    .form-group input:focus, .form-group textarea:focus { border-color: var(--color-primario); outline: none; }
    .form-group textarea { resize: vertical; min-height: 120px; }
    
    .submit-button {
        display: block; width: 100%;
        background-color: var(--color-primario); color: white;
        padding: 15px; border: none; font-weight: 700; border-radius: 6px;
        font-size: 16px; cursor: pointer; transition: all 0.3s ease;
    }
    .submit-button:hover { background-color: #0d5a8a; transform: translateY(-2px); }
    .submit-button:disabled { background-color: #ccc; cursor: not-allowed; }

    #form-status { margin-top: 15px; text-align: center; font-weight: 600; min-height: 24px; }
</style>

<main>
    
    <section class="category-slide">
         <h1>Soporte y Servicio Técnico</h1>
    </section>
    
    <section class="page-header">
         <div class="container">
            <div class="breadcrumbs">
                <a href="/">Inicio</a> > <b>Servicio Técnico</b>
            </div>
        </div>
    </section>

    <section class="service-content container">
        <div class="service-info">
            <h2>Personal Calificado a su Disposición</h2>
            <p>Desde los años 70, el Servicio Técnico de Labelec ha sido un reconocido diferencial. La evolución de la tecnología ha sido vertiginosa, sin embargo nuestra visión sobre la importancia de la atención posventa sigue intacta.</p>
            <p>Contamos con un departamento técnico con personal altamente capacitado y autorizado por las marcas que representamos (Mindray, Natus, etc.).</p>
            
            <h3>Nuestros Servicios Incluyen:</h3>
            <ul>
                <li>Mantenimiento preventivo y correctivo de equipamiento médico.</li>
                <li>Instalación, configuración y puesta en marcha in-situ.</li>
                <li>Calibración y certificación de funcionamiento.</li>
                <li>Reparaciones con repuestos originales de fábrica.</li>
                <li>Asesoramiento técnico y capacitación operativa al personal de salud.</li>
            </ul>
        </div>
        
        <div class="service-form-container">
            <form id="form-soporte">
                <h3>Solicitud de Asistencia</h3>
                
                <div class="form-group">
                    <label>Nombre y Apellido *</label>
                    <input type="text" id="serv-nombre" required>
                </div>
                
                <div class="form-group">
                    <label>Institución / Empresa</label>
                    <input type="text" id="serv-institucion">
                </div>
                
                <div class="form-group">
                    <label>Email de Contacto *</label>
                    <input type="email" id="serv-email" required>
                </div>
                
                <div class="form-group">
                    <label>Equipo (Marca y Modelo) *</label>
                    <input type="text" id="serv-equipo" placeholder="Ej: Monitor Mindray uMEC10" required>
                </div>
                
                <div class="form-group">
                    <label>Descripción del Problema *</label>
                    <textarea id="serv-problema" placeholder="Describa la falla o el servicio requerido..." required></textarea>
                </div>
                
                <button type="submit" class="submit-button" id="btn-serv-enviar">Enviar Solicitud</button>
                <p id="form-status"></p>
            </form>
        </div>
    </section>
</main>

<script>
    const form = document.getElementById('form-soporte');
    const btn = document.getElementById('btn-serv-enviar');
    const status = document.getElementById('form-status');

    form.addEventListener('submit', async (e) => {
        e.preventDefault();

        const datos = {
            nombre: document.getElementById('serv-nombre').value,
            institucion: document.getElementById('serv-institucion').value,
            email: document.getElementById('serv-email').value,
            equipo: document.getElementById('serv-equipo').value,
            problema: document.getElementById('serv-problema').value
        };

        // Feedback visual
        btn.disabled = true;
        btn.textContent = "Procesando...";
        status.textContent = "";

        try {
            const res = await fetch('/api/soporte', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(datos)
            });
            const data = await res.json();

            if (data.success) {
                status.style.color = "#96C94D";
                status.textContent = "✅ Solicitud recibida. Un técnico lo contactará a la brevedad.";
                form.reset();
                setTimeout(() => { 
                    status.textContent = ""; 
                    btn.disabled = false; 
                    btn.textContent = "Enviar Solicitud"; 
                }, 5000);
            } else {
                throw new Error("Error del servidor");
            }
        } catch (error) {
            console.error(error);
            status.style.color = "#e74c3c";
            status.textContent = "❌ Ocurrió un error. Por favor intente más tarde.";
            btn.disabled = false;
            btn.textContent = "Enviar Solicitud";
        }
    });
</script>

<%- include('partials/footer') %>